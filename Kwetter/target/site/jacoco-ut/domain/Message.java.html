<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Message.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Kwetter</a> &gt; <a href="index.source.html" class="el_package">domain</a> &gt; <span class="el_source">Message.java</span></div><h1>Message.java</h1><pre class="source lang-java linenums">package domain;

import javax.persistence.*;
import java.util.GregorianCalendar;
import java.util.HashSet;
import java.util.Set;

/**
 * A message which is posted by a user on the application.
 */
@Entity
@Table(name = &quot;Message&quot;)
@NamedQueries({
        @NamedQuery(
                name = &quot;Mmssage.findAllFromUser&quot;,
                query = &quot;SELECT m FROM Message m WHERE m.poster.id = :userId&quot;
        ),
        @NamedQuery(
                name = &quot;Message.findAllWhereContentLike&quot;,
                query = &quot;SELECT m FROM Message m WHERE LOWER(m.content) LIKE LOWER(:content) &quot;
        )
})
public class Message {

    /**
     * Unique identifier for a message.
     */
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;

    /**
     * The limit on the amount of characters which can go into a single message.
     */
    public static final int CHARACTERLIMIT = 140;

    /**
     * The actual message text. Can not be an empty String and can have a maximum of 140 characters.
     */
    private String content;

    /**
     * Set of HashTags which were placed in the message. One hashtag can only be added once.
     */
    @Transient
    private Set&lt;String&gt; hashtags;

    /**
     * Set of liked which were handed out by Users. One User can only like a message once.
     */
    @OneToMany
    private Set&lt;User&gt; likes;

    /**
     * Set of Users who are mentioned in the message. One user can only be mentioned once.
     */
    @ManyToMany
    private Set&lt;User&gt; mentions;

    /**
     * The user who posted the message
     */
    @ManyToOne
    private User poster;

    /**
     * The time the message was posted.
     */
    private GregorianCalendar postTime;

<span class="fc" id="L71">    public Message() {</span>

<span class="fc" id="L73">    }</span>

    /**
     * Create a new message.
     *
     * @param content  the text of the message. Must be 1-140 characters.
     * @param postTime the time the message was posted. Cannot be in the future.
     * @param poster   the user who posted the message.
     */
<span class="fc" id="L82">    public Message(String content, GregorianCalendar postTime, User poster) {</span>
<span class="fc bfc" id="L83" title="All 4 branches covered.">        if (content == null || content.isEmpty()) {</span>
<span class="fc" id="L84">            throw new IllegalArgumentException(&quot;Content must be a non-empty String.&quot;);</span>
        }
<span class="fc bfc" id="L86" title="All 2 branches covered.">        if (content.length() &gt; CHARACTERLIMIT) {</span>
<span class="fc" id="L87">            throw new IllegalArgumentException(&quot;Content must be smaller than 140 characters.&quot;);</span>
        }
<span class="fc bfc" id="L89" title="All 2 branches covered.">        if (postTime == null) {</span>
<span class="fc" id="L90">            throw new IllegalArgumentException(&quot;PostTime cannot be null.&quot;);</span>
        }
<span class="fc bfc" id="L92" title="All 2 branches covered.">        if (postTime.compareTo(new GregorianCalendar()) &gt; 0) {</span>
<span class="fc" id="L93">            throw new IllegalArgumentException(&quot;PostTime cannot be in the future.&quot;);</span>
        }
<span class="fc bfc" id="L95" title="All 2 branches covered.">        if (poster == null) {</span>
<span class="fc" id="L96">            throw new IllegalArgumentException(&quot;Poster cannot be null.&quot;);</span>
        }

<span class="fc" id="L99">        this.content = content;</span>
<span class="fc" id="L100">        this.postTime = postTime;</span>
<span class="fc" id="L101">        this.poster = poster;</span>

        //TODO - Determine hashtags and mentions based on the content.

<span class="fc" id="L105">        this.hashtags = new HashSet&lt;&gt;();</span>
<span class="fc" id="L106">        this.mentions = new HashSet&lt;&gt;();</span>
<span class="fc" id="L107">        this.likes = new HashSet&lt;&gt;();</span>
<span class="fc" id="L108">    }</span>

    /**
     * Get the content of the message.
     *
     * @return content
     */
    public String getContent() {
<span class="fc" id="L116">        return content;</span>
    }

    /**
     * Get the hashtags in this message.
     *
     * @return a copy of the list of hashtags
     */
    public Set&lt;String&gt; getHashtags() {
<span class="fc" id="L125">        return new HashSet&lt;&gt;(this.hashtags);</span>
    }

    /**
     * Get the id of the message.
     *
     * @return the ID.
     */
    public int getId() {
<span class="fc" id="L134">        return id;</span>
    }

    /**
     * Get the likes in this message.
     *
     * @return a copy of the list of users who liked the message.
     */
    public Set&lt;User&gt; getLikes() {
<span class="fc" id="L143">        return new HashSet&lt;&gt;(this.likes);</span>
    }

    /**
     * Get the mentions in this message.
     *
     * @return a copy of the list of mentions
     */
    public Set&lt;User&gt; getMentions() {
<span class="fc" id="L152">        return new HashSet&lt;&gt;(this.mentions);</span>
    }

    /**
     * Get the poster of the message.
     *
     * @return the user who posted this message
     */
    public User getPoster() {
<span class="fc" id="L161">        return poster;</span>
    }

    /**
     * Get the date and time of the message.
     *
     * @return post time
     */
    public GregorianCalendar getPostTime() {
<span class="fc" id="L170">        return postTime;</span>
    }

    /**
     * Set the content of the message.
     *
     * @param content the new content. Cannot be an empty String and can have a maximum of 140 chars.
     */
    public void setContent(String content) {
<span class="fc bfc" id="L179" title="All 4 branches covered.">        if (content == null || content.isEmpty()) {</span>
<span class="fc" id="L180">            throw new IllegalArgumentException(&quot;Content must be a non-empty String and smaller than 140 characters&quot;);</span>
        }
<span class="fc bfc" id="L182" title="All 2 branches covered.">        if (content.length() &gt; CHARACTERLIMIT) {</span>
<span class="fc" id="L183">            throw new IllegalArgumentException(&quot;Content must be smaller than 140 characters.&quot;);</span>
        }

<span class="fc" id="L186">        this.content = content;</span>
<span class="fc" id="L187">    }</span>

    /**
     * Like a post.
     *
     * @param like the user who likes the post.
     */
    public void like(User like) {
<span class="nc" id="L195">        throw new UnsupportedOperationException();</span>
        // TODO: Add desired functionality.
    }

    /**
     * Unlike a post.
     *
     * @param unlike the user who likes the post.
     */
    public void unlike(User unlike) {
<span class="nc" id="L205">        throw new UnsupportedOperationException();</span>
        // TODO: Add desired functionality.
    }

    /**
     * Add a hashtag.
     *
     * @param hashtag the hashtag to add. Cannot be an empty String.
     */
    private void addHashtag(String hashtag) {
<span class="nc" id="L215">        throw new UnsupportedOperationException();</span>
        // TODO: Add desired functionality.
    }

    /**
     * Add a mention.
     *
     * @param mention the user to mention.
     */
    private void addMention(User mention) {
<span class="nc" id="L225">        throw new UnsupportedOperationException();</span>
        // TODO: add desired functionality.
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>